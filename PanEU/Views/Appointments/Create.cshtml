@model PanEU.ViewModels.MakeAnAppointmentModel
@using System.Globalization
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Create</h2>

@using (Html.BeginForm())
{
    CultureInfo ci = new CultureInfo("en-US");

    @Html.AntiForgeryToken()
    
<div class="form-horizontal">
    <h4>Make an appointment</h4>
    <hr />
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    @Html.HiddenFor(model => model.StoreId)
    @Html.HiddenFor(model => model.UserId)

    <div class="form-group">
        @Html.LabelFor(model => model.AppointmentTime, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="clockpicker col-md-10" data-placement="center" data-align="top" data-autoclose="true">
            @Html.TextBoxFor(model => model.AppointmentTime, new { @class = "form-control" })
            <span class="input-group-addon">
                <span class="glyphicon glyphicon-time"></span>
            </span>
        </div>
    </div>

    <div class="form-group">
        <Label class="control-label col-md-2">Select a day</Label>
        <div class="radio col-md-10">
            @if (Model.Store.Monday)
            {
                <div class="form-check">

                    @Html.RadioButtonFor(Model => Model.DayInWeek, 1)

                    <label class="form-check-label">
                        @if (Model.DayInWeek > 1)
                        {
                            @DateTime.Today.AddDays(7 + 1 - Model.DayInWeek).ToString("dddd, dd MMMM yyyy",ci)
                        }
                        else
                        {
                            @DateTime.Today.AddDays(1-Model.DayInWeek ).ToString("dddd, dd MMMM yyyy",ci)
                        }
                    </label>
                </div>
            }

            @if (Model.Store.Tuesday)
            {
                <div class="form-check">

                    @Html.RadioButtonFor(Model => Model.DayInWeek, 2)

                    <label class="form-check-label">
                        @if (Model.DayInWeek > 2)
                        {
                            @DateTime.Today.AddDays(7 + 2 - Model.DayInWeek).ToString("dddd, dd MMMM yyyy",ci)
                        }
                        else
                        {
                            @DateTime.Today.AddDays(2-Model.DayInWeek ).ToString("dddd, dd MMMM yyyy",ci)
                        }
                    </label>
                </div>
            }
            @if (Model.Store.Wednesday)
            {
                <div class="form-check">

                    @Html.RadioButtonFor(Model => Model.DayInWeek, 3)

                    <label class="form-check-label">
                        @if (Model.DayInWeek > 3)
                        {
                            @DateTime.Today.AddDays(7 + 3 - Model.DayInWeek).ToString("dddd, dd MMMM yyyy",ci)
                        }
                        else
                        {
                            @DateTime.Today.AddDays(3-Model.DayInWeek ).ToString("dddd, dd MMMM yyyy",ci)
                        }
                    </label>
                </div>
            }
            @if (Model.Store.Thursday)
            {
                <div class="form-check">

                    @Html.RadioButtonFor(Model => Model.DayInWeek, 4)

                    <label class="form-check-label">
                        @if (Model.DayInWeek > 4)
                        {
                            @DateTime.Today.AddDays(7 + 4 - Model.DayInWeek).ToString("dddd, dd MMMM yyyy",ci)
                        }
                        else
                        {
                            @DateTime.Today.AddDays(4-Model.DayInWeek ).ToString("dddd, dd MMMM yyyy",ci)
                        }
                    </label>
                </div>
            }
            @if (Model.Store.Friday)
            {
                <div class="form-check">

                    @Html.RadioButtonFor(Model => Model.DayInWeek, 5)

                    <label class="form-check-label">
                        @if (Model.DayInWeek > 5)
                        {
                            @DateTime.Today.AddDays(7 + 5 - Model.DayInWeek).ToString("dddd, dd MMMM yyyy",ci)
                        }
                        else
                        {
                            @DateTime.Today.AddDays(5-Model.DayInWeek ).ToString("dddd, dd MMMM yyyy",ci)
                        }
                    </label>
                </div>
            }
            @if (Model.Store.Saturday)
            {
                <div class="form-check">

                    @Html.RadioButtonFor(Model => Model.DayInWeek, 6)

                    <label class="form-check-label">
                        @if (Model.DayInWeek > 6)
                        {
                            @DateTime.Today.AddDays(7 + 6 - Model.DayInWeek).ToString("dddd, dd MMMM yyyy",ci)
                        }
                        else
                        {
                            @DateTime.Today.AddDays(6-Model.DayInWeek ).ToString("dddd, dd MMMM yyyy",ci)
                        }
                    </label>
                </div>
            }
            @if (Model.Store.Sunday)
            {
                <div class="form-check">

                    @Html.RadioButtonFor(Model => Model.DayInWeek, 0)

                    <label class="form-check-label">
                        @if (Model.DayInWeek > 0)
                        {
                            @DateTime.Today.AddDays(7 + 0 - Model.DayInWeek).ToString("dddd, dd MMMM yyyy",ci)
                        }
                        else
                        {
                            @DateTime.Today.AddDays(0-Model.DayInWeek).ToString("dddd, dd MMMM yyyy",ci)
                        }
                    </label>
                </div>
            }

        </div>
    </div>


    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Create" class="btn btn-primary" />
        </div>
    </div>
</div>
}

<div>
    @Html.ActionLink("Back to List", "Index","Stores",null,null)
</div>
